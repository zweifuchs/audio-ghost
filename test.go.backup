package main

import (
	"fmt"
	_ "io/ioutil"
	"log"
	"flag"
	"os"
	"path/filepath"
	"strings"
	"io/ioutil"
	"audio_ghost"
)

//type Audiobook struct {
//	Name  string
//	Path  string
//	Files []string
//}
//
//type Audiobooks map[string]*Audiobook


func main() {

	var directory string
	books := make(Audiobooks)

	flag.StringVar(&directory, "dir", "./", "directory to scan")
	flag.Parse()

	fmt.Println("Scanning directory", directory)

	err := filepath.Walk(directory, scandir(books))
	if err != nil {
		log.Fatal(err)
	}

	fmt.Println("\n\nResults:")
	for _, f := range books {
		fmt.Println("Name: ",f.Name);
		fmt.Println("Path: ", f.Path);
		fmt.Println("Files: ")
		for _, mp3 := range f.Files {
			fmt.Print(mp3, ",")
		}
		fmt.Println()
	}

}
